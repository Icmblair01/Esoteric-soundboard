<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"
    />
    <title>Esoteric Soundboard</title>
    <meta name="theme-color" content="#0b0b12" />
    <link rel="manifest" href="manifest.webmanifest" />
    <link rel="apple-touch-icon" href="icon-192.png" />
    <style>
      :root {
        --bg: #0a0a0a;
        --ink: #e6dfc8;
        --accent: #a56cff;
        --accent2: #27e1ff;
        --glow: drop-shadow(0 0 6px var(--accent))
          drop-shadow(0 0 18px rgba(165, 108, 255, 0.35));
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        background: radial-gradient(
          1200px 1200px at 50% 50%,
          #1a1024 0%,
          #0b0b12 35%,
          #000 70%
        );
        color: var(--ink);
        font-family:
          ui-sans-serif,
          system-ui,
          -apple-system,
          Segoe UI,
          Roboto,
          "Helvetica Neue",
          Arial;
        overflow: hidden;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        -webkit-touch-callout: none;
        -webkit-tap-highlight-color: transparent;
      }
      .wrap {
        position: relative;
        height: 100%;
        display: grid;
        place-items: center;
      }

```
  /* Mobile-first approach - floating menu button */
  .menu-toggle {
    position: fixed;
    top: 16px;
    right: 16px;
    z-index: 1000;
    background: rgba(10, 10, 16, 0.9);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    width: 56px;
    height: 56px;
    display: grid;
    place-items: center;
    cursor: pointer;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .menu-toggle:hover {
    transform: scale(1.05);
    box-shadow: 0 12px 48px rgba(0, 0, 0, 0.8);
  }
  
  .menu-toggle.active {
    background: rgba(39, 225, 255, 0.2);
    border-color: var(--accent2);
  }
  
  .menu-icon {
    width: 24px;
    height: 24px;
    position: relative;
    transition: transform 0.3s ease;
  }
  
  .menu-icon span {
    display: block;
    width: 100%;
    height: 2px;
    background: var(--ink);
    margin: 6px 0;
    transition: all 0.3s ease;
    transform-origin: center;
  }
  
  .menu-toggle.active .menu-icon span:nth-child(1) {
    transform: rotate(45deg) translate(6px, 6px);
  }
  
  .menu-toggle.active .menu-icon span:nth-child(2) {
    opacity: 0;
  }
  
  .menu-toggle.active .menu-icon span:nth-child(3) {
    transform: rotate(-45deg) translate(8px, -8px);
  }

  /* Slide-out panel */
  .control-panel {
    position: fixed;
    top: 0;
    right: -100%;
    width: min(380px, 85vw);
    height: 100%;
    background: rgba(10, 10, 16, 0.95);
    backdrop-filter: blur(20px);
    border-left: 1px solid rgba(255, 255, 255, 0.15);
    z-index: 999;
    transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    overflow-y: auto;
    padding: 80px 20px 20px;
    box-shadow: -10px 0 50px rgba(0, 0, 0, 0.5);
  }
  
  .control-panel.open {
    right: 0;
  }
  
  .panel-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    z-index: 998;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
  }
  
  .panel-overlay.active {
    opacity: 1;
    visibility: visible;
  }

  .panel-section {
    margin-bottom: 32px;
  }
  
  .panel-section .title {
    letter-spacing: 0.12em;
    text-transform: uppercase;
    font-size: 12px;
    opacity: 0.8;
    margin-bottom: 16px;
    padding-bottom: 8px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .ctrls {
    display: flex;
    gap: 12px;
    align-items: center;
    flex-wrap: wrap;
  }
  
  .ctrls-vertical {
    flex-direction: column;
    align-items: stretch;
    gap: 16px;
  }
  
  .ctrl-row {
    display: flex;
    gap: 12px;
    align-items: center;
    flex-wrap: wrap;
  }
  
  button,
  input[type="range"],
  select,
  .file {
    -webkit-tap-highlight-color: transparent;
  }
  
  button {
    background: linear-gradient(
      180deg,
      rgba(48, 48, 68, 0.9),
      rgba(24, 24, 34, 0.9)
    );
    border: 1px solid rgba(255, 255, 255, 0.14);
    color: var(--ink);
    padding: 14px 20px;
    border-radius: 12px;
    cursor: pointer;
    font-weight: 600;
    transition:
      transform 0.08s ease,
      box-shadow 0.2s ease,
      background 0.2s ease;
    box-shadow: 0 6px 14px rgba(0, 0, 0, 0.35);
    min-height: 48px;
    touch-action: manipulation;
    font-size: 14px;
    flex: 1;
    min-width: 120px;
  }
  
  button:hover {
    transform: translateY(-1px);
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.4);
  }
  
  button.active {
    outline: 2px solid var(--accent2);
    box-shadow: 0 0 0 6px rgba(39, 225, 255, 0.12) inset;
  }
  
  .slider-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
    flex: 1;
    min-width: 140px;
  }
  
  .slider-label {
    font-size: 12px;
    opacity: 0.8;
    font-weight: 600;
  }
  
  input[type="range"] {
    accent-color: var(--accent);
    width: 100%;
    height: 6px;
    appearance: none;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
    outline: none;
  }
  
  input[type="range"]::-webkit-slider-thumb {
    appearance: none;
    width: 20px;
    height: 20px;
    background: var(--accent);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  }
  
  select {
    background: rgba(48, 48, 68, 0.9);
    border: 1px solid rgba(255, 255, 255, 0.14);
    color: var(--ink);
    padding: 12px 16px;
    border-radius: 8px;
    font-size: 14px;
    flex: 1;
    min-width: 160px;
  }
  
  .board {
    position: relative;
    width: min(90vmin, 420px);
    aspect-ratio: 1;
    display: grid;
    place-items: center;
  }
  
  .sigil-bg {
    position: absolute;
    inset: 0;
    filter: var(--glow);
    opacity: 0.9;
  }
  
  .sigil-bg svg {
    width: 100%;
    height: 100%;
    display: block;
  }
  
  .pads {
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
  }
  
  .pads button.pad {
    position: absolute;
    width: 80px;
    height: 80px;
    border-radius: 50%;
    display: grid;
    place-items: center;
    padding: 0;
    background:
      radial-gradient(
        circle at 50% 40%,
        rgba(255, 255, 255, 0.12),
        rgba(0, 0, 0, 0.35)
      ),
      conic-gradient(
        from 0deg,
        rgba(167, 118, 255, 0.08),
        rgba(39, 225, 255, 0.08),
        rgba(255, 118, 233, 0.08),
        rgba(167, 118, 255, 0.08)
      );
    border: 1px solid rgba(255, 255, 255, 0.18);
    box-shadow:
      inset 0 0 0 2px rgba(255, 255, 255, 0.06),
      0 12px 30px rgba(0, 0, 0, 0.5);
    touch-action: manipulation;
    transition: all 0.15s ease;
  }
  
  .pads button.pad:active {
    transform: translate(-50%, -50%) scale(0.95);
  }
  
  .pads button.pad.active {
    outline: 2px solid var(--accent2);
    box-shadow: 
      inset 0 0 0 2px rgba(39, 225, 255, 0.3),
      0 0 30px rgba(39, 225, 255, 0.4),
      0 12px 30px rgba(0, 0, 0, 0.5);
  }
  
  .pads button.pad img,
  .pads button.pad svg {
    width: 70%;
    height: 70%;
    object-fit: contain;
    filter: invert(88%) sepia(12%) saturate(140%) hue-rotate(10deg)
      drop-shadow(0 0 6px rgba(165, 108, 255, 0.45));
    opacity: 0.9;
  }
  
  .center {
    position: absolute;
    width: 32%;
    aspect-ratio: 1;
    border-radius: 50%;
    display: grid;
    place-items: center;
    background: radial-gradient(
      closest-side,
      rgba(255, 255, 255, 0.06),
      rgba(0, 0, 0, 0.4)
    );
    border: 1px solid rgba(255, 255, 255, 0.16);
    box-shadow:
      inset 0 0 0 2px rgba(255, 255, 255, 0.06),
      0 18px 40px rgba(0, 0, 0, 0.55);
  }
  
  .center .inner {
    width: 84%;
    aspect-ratio: 1;
    border-radius: 50%;
    display: grid;
    place-items: center;
    border: 1px dashed rgba(255, 255, 255, 0.18);
  }
  
  .center img,
  .center svg {
    width: 72%;
    height: 72%;
    object-fit: contain;
    filter: var(--glow);
    opacity: 0.95;
  }
  
  @keyframes spin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
  
  .spin-slow {
    animation: spin 60s linear infinite;
  }
  
  .spin-fast {
    animation: spin 18s linear infinite;
  }
  
  .file {
    position: relative;
    overflow: hidden;
    flex: 1;
  }
  
  .file input {
    position: absolute;
    inset: 0;
    opacity: 0;
    cursor: pointer;
  }
  
  .help-text {
    font-size: 12px;
    opacity: 0.7;
    line-height: 1.4;
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
  }

  /* Desktop optimization */
  @media (min-width: 768px) {
    .menu-toggle {
      display: none;
    }
    
    .control-panel {
      position: fixed;
      right: 16px;
      top: 16px;
      bottom: 16px;
      width: 320px;
      height: auto;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 10px 50px rgba(0, 0, 0, 0.4);
    }
    
    .panel-overlay {
      display: none;
    }
    
    .board {
      width: min(70vmin, 480px);
    }
    
    .pads button.pad {
      width: 100px;
      height: 100px;
    }
  }

  /* Large desktop */
  @media (min-width: 1200px) {
    .board {
      width: min(60vmin, 600px);
    }
    
    .pads button.pad {
      width: 120px;
      height: 120px;
    }
    
    .control-panel {
      width: 380px;
    }
  }

  /* Landscape mobile optimization */
  @media (max-height: 600px) and (orientation: landscape) {
    .board {
      width: min(75vh, 380px);
    }
    
    .pads button.pad {
      width: 60px;
      height: 60px;
    }
    
    .center {
      width: 28%;
    }
    
    .control-panel {
      width: min(320px, 75vw);
      padding: 60px 16px 16px;
    }
    
    button {
      padding: 10px 16px;
      min-height: 42px;
      font-size: 13px;
    }
  }

  /* Very small screens */
  @media (max-width: 360px) {
    .board {
      width: 92vmin;
    }
    
    .pads button.pad {
      width: 70px;
      height: 70px;
    }
    
    .control-panel {
      width: 90vw;
      padding: 70px 16px 16px;
    }
    
    .menu-toggle {
      width: 48px;
      height: 48px;
      top: 12px;
      right: 12px;
    }
  }
</style>
```

  </head>
  <body>
    <div class="wrap">
      <div class="board" id="board">
        <div class="sigil-bg spin-slow" aria-hidden="true">
          <svg viewBox="0 0 100 100" preserveAspectRatio="xMidYMid meet">
            <defs>
              <g id="star8">
                <polygon
                  points="50,5 56,28 95,28 63,45 75,90 50,62 25,90 37,45 5,28 44,28"
                  fill="none"
                  stroke="url(#g)"
                  stroke-width=".6"
                />
              </g>
              <radialGradient id="g" cx="50%" cy="50%" r="70%">
                <stop offset="0%" stop-color="#fff" stop-opacity=".8" />
                <stop offset="100%" stop-color="#9d7fff" stop-opacity=".25" />
              </radialGradient>
            </defs>
            <circle
              cx="50"
              cy="50"
              r="48"
              fill="none"
              stroke="url(#g)"
              stroke-width=".6"
            />
            <g class="spin-fast" transform-origin="50 50">
              <use href="#star8" />
              <use href="#star8" transform="rotate(22 50 50)" />
              <use href="#star8" transform="rotate(45 50 50)" />
            </g>
            <g opacity=".65">
              <rect
                x="25"
                y="25"
                width="50"
                height="50"
                fill="none"
                stroke="url(#g)"
                stroke-width=".5"
              />
              <rect
                x="30"
                y="30"
                width="40"
                height="40"
                fill="none"
                stroke="url(#g)"
                stroke-width=".4"
              />
              <rect
                x="35"
                y="35"
                width="30"
                height="30"
                fill="none"
                stroke="url(#g)"
                stroke-width=".35"
              />
            </g>
          </svg>
        </div>
        <div class="pads" id="pads"></div>
        <div class="center">
          <div class="inner">
            <svg viewBox="0 0 100 100" aria-label="pentacle">
              <circle
                cx="50"
                cy="50"
                r="42"
                fill="none"
                stroke="#d0c7ff"
                stroke-width="3"
                opacity=".8"
              />
              <polygon
                points="50,18 62,62 20,38 80,38 38,62"
                fill="none"
                stroke="#bca9ff"
                stroke-width="4"
              />
              <circle
                cx="50"
                cy="50"
                r="8"
                fill="none"
                stroke="#fff"
                stroke-width="2"
              />
            </svg>
          </div>
        </div>
      </div>
    </div>

```
<!-- Mobile menu toggle -->
<button class="menu-toggle" id="menuToggle">
  <div class="menu-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</button>

<!-- Control panel overlay for mobile -->
<div class="panel-overlay" id="panelOverlay"></div>

<!-- Control panel -->
<div class="control-panel" id="controlPanel">
  <div class="panel-section">
    <div class="title">Esoteric Soundboard</div>
    <div class="ctrls ctrls-vertical">
      <div class="ctrl-row">
        <button id="start">Start Audio</button>
        <button id="stop">Stop All</button>
      </div>
      <button id="random">Shuffle Combo</button>
      
      <div class="ctrl-row">
        <div class="slider-group">
          <div class="slider-label">Volume</div>
          <input
            id="vol"
            type="range"
            min="0"
            max="1"
            step="0.01"
            value="0.7"
          />
        </div>
        <div class="slider-group">
          <div class="slider-label">Reverb</div>
          <input
            id="rev"
            type="range"
            min="0"
            max="1"
            step="0.01"
            value="0.35"
          />
        </div>
      </div>
      
      <div class="ctrl-row">
        <span class="file">
          <button>Load Your Sigils</button>
          <input type="file" id="imgLoader" accept="image/*" multiple />
        </span>
        <button id="installHelp">Install</button>
      </div>
    </div>
    
    <div class="help-text">
      Toggle multiple pads; they're tuned to sit well together. Headphones recommended for subtle binaural offsets.
    </div>
  </div>

  <div class="panel-section">
    <div class="title">Sound Modes</div>
    <div class="ctrls">
      <select id="scale">
        <option value="ambient" selected>Ambient blend</option>
        <option value="pentatonic">A pentatonic drones</option>
        <option value="solfeggio">Solfeggio set</option>
        <option value="theta">Theta beats (4–7 Hz)</option>
        <option value="alpha">Alpha beats (8–12 Hz)</option>
      </select>
    </div>
  </div>
</div>

<script>
  // --- WebAudio (same as previous bundle, abbreviated where possible) ---
  let AC, master, masterGain, reverb, reverbGain;
  const padsEl = document.getElementById("pads");
  const padCount = 8;
  const ringRadius = 42;
  
  function makeImpulse(ctx, s = 2.2) {
    const r = ctx.sampleRate,
      l = r * s,
      b = ctx.createBuffer(2, l, r);
    for (let c = 0; c < 2; c++) {
      const d = b.getChannelData(c);
      for (let i = 0; i < l; i++)
        d[i] = (Math.random() * 2 - 1) * Math.pow(1 - i / l, 2.4);
    }
    return b;
  }
  
  function init() {
    if (AC) return;
    AC = new (window.AudioContext || window.webkitAudioContext)();
    master = AC.createGain();
    master.gain.value = 0.7;
    masterGain = master;
    reverb = AC.createConvolver();
    reverb.buffer = makeImpulse(AC, 2.6);
    reverbGain = AC.createGain();
    reverbGain.gain.value = 0.35;
    master.connect(AC.destination);
    reverb.connect(reverbGain).connect(master);
  }
  
  function createPad({
    base = 110,
    beatHz = 7,
    type = "sine",
    filter = 900,
  }) {
    if (!AC) init();
    const L = AC.createOscillator(),
      R = AC.createOscillator();
    L.type = type;
    R.type = type;
    L.frequency.value = base - beatHz / 2;
    R.frequency.value = base + beatHz / 2;
    const lg = AC.createGain(),
      rg = AC.createGain();
    lg.gain.value = rg.gain.value = 0;
    const lp = AC.createStereoPanner(),
      rp = AC.createStereoPanner();
    lp.pan.value = -0.6;
    rp.pan.value = 0.6;
    const f = AC.createBiquadFilter();
    f.type = "lowpass";
    f.frequency.value = filter;
    f.Q.value = 0.2;
    const s = AC.createOscillator();
    s.type = "triangle";
    s.frequency.value = base * 2;
    const sg = AC.createGain();
    sg.gain.value = 0;
    L.connect(lg).connect(lp).connect(f);
    R.connect(rg).connect(rp).connect(f);
    s.connect(sg).connect(f);
    f.connect(reverb);
    f.connect(master);
    [L, R, s].forEach((o) => o.start());
    
    function setOn(on) {
      const t = on ? 0.24 : 0;
      lg.gain.cancelScheduledValues(AC.currentTime);
      rg.gain.cancelScheduledValues(AC.currentTime);
      sg.gain.cancelScheduledValues(AC.currentTime);
      lg.gain.linearRampToValueAtTime(
        on ? 0.24 : 0,
        AC.currentTime + (on ? 0.35 : 0.25),
      );
      rg.gain.linearRampToValueAtTime(
        on ? 0.24 : 0,
        AC.currentTime + (on ? 0.35 : 0.25),
      );
      sg.gain.linearRampToValueAtTime(
        on ? 0.12 : 0,
        AC.currentTime + (on ? 0.5 : 0.3),
      );
    }
    
    function update({ base: n = base, beatHz: b = beatHz }) {
      base = n;
      beatHz = b;
      L.frequency.setTargetAtTime(base - beatHz / 2, AC.currentTime, 0.2);
      R.frequency.setTargetAtTime(base + beatHz / 2, AC.currentTime, 0.2);
      s.frequency.setTargetAtTime(base * 2, AC.currentTime, 0.3);
    }
    
    function stop() {
      [L, R, s].forEach((o) => {
        try {
          o.stop();
        } catch (e) {}
      });
    }
    return { setOn, update, stop };
  }
  
  function makeNoisePad(tone = "brown") {
    if (!AC) init();
    const bs = 2 * AC.sampleRate,
      nb = AC.createBuffer(1, bs, AC.sampleRate),
      out = nb.getChannelData(0);
    let last = 0;
    for (let i = 0; i < bs; i++) {
      const w = Math.random() * 2 - 1;
      last = (last + 0.02 * w) / 1.02;
      out[i] = tone === "pink" ? last : last * 1.8;
    }
    const src = AC.createBufferSource();
    src.buffer = nb;
    src.loop = true;
    const f = AC.createBiquadFilter();
    f.type = "lowpass";
    f.frequency.value = 600;
    const g = AC.createGain();
    g.gain.value = 0;
    src.connect(f).connect(g);
    g.connect(reverb);
    g.connect(master);
    src.start();
    return {
      setOn(on) {
        g.gain.cancelScheduledValues(AC.currentTime);
        g.gain.linearRampToValueAtTime(
          on ? 0.18 : 0,
          AC.currentTime + (on ? 0.4 : 0.25),
        );
        f.frequency.setTargetAtTime(on ? 900 : 400, AC.currentTime, 0.6);
      },
      update() {},
      stop() {
        try {
          src.stop();
        } catch (e) {}
      },
    };
  }
  
  const recipes = {
    ambient: [
      { base: 110, beat: 7, type: "sine" },
      { base: 196, beat: 9, type: "sine" },
      { base: 261.63, beat: 8, type: "triangle" },
      { base: 329.63, beat: 6, type: "triangle" },
      { base: 87, beat: 6, type: "sine" },
      { noise: "brown" },
      { base: 432, beat: 7, type: "sine" },
      { base: 55, beat: 5, type: "sine" },
    ],
    pentatonic: [110, 146.83, 164.81, 196, 246.94, 293.66, 329.63, 392].map(
      (f, i) => ({
        base: f,
        beat: i % 2 ? 7 : 9,
        type: i % 3 ? "triangle" : "sine",
      }),
    ),
    solfeggio: [174, 285, 396, 417, 528, 639, 741, 852].map((f, i) => ({
      base: f,
      beat: i % 2 ? 7 : 5,
    })),
    theta: [110, 174, 196, 210, 256, 288, 320, 360].map((f) => ({
      base: f,
      beat: 5.5,
    })),
    alpha: [110, 174, 196, 210, 256, 288, 320, 360].map((f) => ({
      base: f,
      beat: 10,
    })),
  };
  
  let pads = [];
  
  function buildPads(mode = "ambient") {
    if (!AC) init();
    padsEl.innerHTML = "";
    pads.forEach((p) => p.stop && p.stop());
    pads = [];
    const set = recipes[mode];
    for (let i = 0; i < 8; i++) {
      const a = (i / 8) * Math.PI * 2 - Math.PI / 2,
        x = 50 + Math.cos(a) * 42,
```
